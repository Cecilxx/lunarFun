"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),LUNAR_INFO={MIN_YEAR:1901,MAX_YEAR:2100,YEAR_INFO:["4e4ae0","22a570","7554d5","42d260","12d950","e56554","3656a0","a9ad0","5955d2","2a4ae0","79a5b6","4aa4d0","1ad250","e9d255","3ab540","ed6a0","5dada2","2e95b0","864977","524970","22a4b0","71b4b5","426a50","166d40","e1ab54","362b60","a9570","5d52f2","2a4970","796566","46d4a0","1aea50","e96a95","3a5ad0","122b60","e186e3","2e92e0","fd48d7","4ec950","22d4a0","edd8a6","3eb550","1656a0","e5a5b4","3625d0","a92d0","59d2b2","2aa950","75b557","466ca0","1ab550","ed5355","3a4da0","ea5b0","e14573","3252b0","7da9a8","4ae930","226aa0","71aea6","3eab50","164b60","65aae4","36a570","a5260","55f263","26d950","795b57","4656a0","1a96d0","6d4dd5","3e4ad0","ea4d0","5dd4d4","2ed250","7dd558","4ab540","1eb6a0","f195a6","4295b0","1649b0","65a974","36a4b0","ab27a","526a50","266d40","75af46","46ab60","1a9570","6d4af5","3e4970","1264b0","5d74a3","2aea50","7d6b58","4e5ac0","1eab60","7196d5","4292e0","16c960","61d954","32d4a0","6da50","597552","2656a0","75abb7","4a25d0","1e92d0","69cab5","3aa950","eb4a0","5dbaa4","2aad50","7d55d9","4e4ba0","22a5b0","f15176","4252b0","16a930","657954","326aa0","6ad50","595b52","2a4b60","75a6e6","46a4e0","1ad260","69ea65","36d530","e5aa0","5d76a3","2e96d0","7d4afb","4e4ad0","22a4d0","f1d0b6","3ed250","12d520","61dd45","32b5a0","656d0","5955b2","2a49b0","79a577","46a4b0","1aaa50","e9b255","3a6d20","aada0","dd4b63","2e9370","649f8","4e4970","2264b0","f168a6","3eea50","126aa0","e1a6c4","32aae0","a92e0","55d2e3","26c960","75d557","46d4a0","16da50","695d55","3a56a0","ea6d0","5d55d4","2e52d0","7da9b8","4ea950","1eb4a0","6db6a6","3ead50","1655a0","61aba4","32a5b0","a52b0","59b273","266930","757337","466aa0","1aad50","e94b55","3a4b60","ea570","6154e4","2ad160","79e968","4ad520","1edaa0","ed6aa6","3e56d0","164ae0","65a9d4","32a2d0","6d150","55f252","26d520"],HEAVENLY_STEMS:["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],EARTHLY_BRANCHES:["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],ZODIAC:["鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"],CHINESE_MONTH:["正","二","三","四","五","六","七","八","九","十","冬","腊"],CHINESE_DATE:["零","一","二","三","四","五","六","七","八","九","十","初","廿","卅","年","月","日","闰"],CHINESE_SOLAR_TERMS:["立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至","小寒","大寒"]},LunarFunClass=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"_throwIfMissing",value:function(){throw new Error("Missing parameter")}},{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._throwIfMissing(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._throwIfMissing();if(!e)return"";var a=e.toString("16"),n=parseInt(a,16).toString(2);24!==n.length&&(n="0".repeat(24-n.length)+n);var r={year:+t},s=n.slice(-4);return"0000"===s?(r.isRun=!1,r.runMonth=0,r.runMonthDays=0):(r.isRun=!0,r.runMonth=parseInt(s,2),r.runMonthDays=+n.slice(0,1)+29),r.monthsDays=[],[].concat(_toConsumableArray(n.slice(8,20))).map(function(t){r.monthsDays.push(+t+29)}),r.firstMonth=parseInt(n.slice(6,8),2),r.firstDay=parseInt(n.slice(1,6),2),r}},{key:"isLeapYear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._throwIfMissing(),e=+t;return Number.isNaN(e)?(console.warn("输入的年份参数有误"),!1):e<1582?e%4==0:e%4==0&&e%100!=0||e%400==0}},{key:"getHeavenlyStems",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._throwIfMissing(),e=+t;if(Number.isNaN(e))return console.warn("输入的年份参数有误"),"";var a=(e-3)%10;return 0===a&&(a=10),this.LUNAR_INFO.HEAVENLY_STEMS[a-1]}},{key:"getEarthlyBranches",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._throwIfMissing(),e=+t;if(Number.isNaN(e))return console.warn("输入的年份参数有误"),"";var a=(e-3)%12;return 0===a&&(a=12),this.LUNAR_INFO.EARTHLY_BRANCHES[a-1]}},{key:"getZodiac",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._throwIfMissing(),e=+t;if(Number.isNaN(e))return console.warn("输入的年份参数有误"),"";var a=(e-3)%12;return 0===a&&(a=12),this.LUNAR_INFO.ZODIAC[a-1]}},{key:"getMonthNumberDays",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._throwIfMissing(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._throwIfMissing();return["",31,this.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]}},{key:"getLunarMonthNumberDays",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._throwIfMissing(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._throwIfMissing(),a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.LUNAR_INFO.YEAR_INFO[t-this.LUNAR_INFO.MIN_YEAR],r=this.toJSON(+t,n);return r.isRun&&+e===r.runMonth&&a?r.runMonthDays:r.monthsDays[e-1]}},{key:"getLunarYearDaysTotal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._throwIfMissing();if(!t)return console.warn("输入的年份参数有误"),0;var e=this.LUNAR_INFO.YEAR_INFO[t-this.LUNAR_INFO.MIN_YEAR],a=this.toJSON(+t,e);return a.isRun?a.monthsDays.reduce(function(t,e){return t+e},a.runMonthDays):a.monthsDays.reduce(function(t,e){return t+e})}},{key:"distanceLunarFirstDays",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._throwIfMissing(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._throwIfMissing(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._throwIfMissing(),n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.LUNAR_INFO.YEAR_INFO[t-this.LUNAR_INFO.MIN_YEAR],s=this.toJSON(+t,r);return s.isRun?e<s.runMonth?s.monthsDays.slice(0,e-1).reduce(function(t,e){return t+e},0)+a-1:e>s.runMonth?s.monthsDays.slice(0,e-1).reduce(function(t,e){return t+e},s.runMonthDays)+a-1:e!==s.runMonth||n?e===s.runMonth&&n?s.monthsDays.slice(0,e).reduce(function(t,e){return t+e},0)+a-1:void 0:s.monthsDays.slice(0,e-1).reduce(function(t,e){return t+e},0)+a-1:s.monthsDays.slice(0,e-1).reduce(function(t,e){return t+e},0)+a-1}},{key:"distanceDate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._throwIfMissing(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._throwIfMissing(),a=t-e;return Math.floor(Math.abs(a)/1e3/60/60/24)}},{key:"getDateYMD",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._throwIfMissing(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._throwIfMissing(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._throwIfMissing();return new Date(+t,e-1,+a)}},{key:"gregorianToLunal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._throwIfMissing(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._throwIfMissing(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._throwIfMissing(),n=this.LUNAR_INFO.YEAR_INFO[t-this.LUNAR_INFO.MIN_YEAR],r=this.toJSON(+t,n),s=0;e>r.firstMonth?s=1:e<r.firstMonth?s=-1:+e===r.firstMonth&&(a>r.firstDay?s=1:a<r.firstDay?s=-1:+a===r.firstDay&&(s=0));var i=0,o=0,h=0,u=!1;1===s?i=+t:-1===s?(i=t-1,n=this.LUNAR_INFO.YEAR_INFO[i-this.LUNAR_INFO.MIN_YEAR],r=this.toJSON(i,n)):0===s&&(i=+t,o=1,h=1);var d=this.distanceDate(this.getDateYMD(i,r.firstMonth,r.firstDay),this.getDateYMD(t,e,a)),N=[].concat(_toConsumableArray(r.monthsDays));r.isRun&&N.splice(r.runMonth,0,r.runMonthDays);var c=0,l=!1;return N.reduce(function(t,e,a){return t+e>=d+1&&!l&&(l=!0,c=a,h=N[a]-(t+e-(d+1))),t+e},0),r.isRun?c+1<=r.runMonth?o=c+1:(o=c,c===r.runMonth&&(u=!0)):o=c+1,[+i,+o,+h,u]}},{key:"lunalToGregorian",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._throwIfMissing(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._throwIfMissing(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._throwIfMissing(),n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.LUNAR_INFO.YEAR_INFO[t-this.LUNAR_INFO.MIN_YEAR],s=this.toJSON(+t,r),i=this.distanceLunarFirstDays(+t,+e,+a,n),o=this.distanceDate(this.getDateYMD(+t,1,1),this.getDateYMD(+t,s.firstMonth,s.firstDay)),h=i+o,u=this.isLeapYear(+t),d=u?366:365;if(h+1>d){var N=h+1-d;return N<=31?[+t+1,1,N]:[+t+1,2,N-31]}var c=u?[31,29,31,30,31,30,31,31,30,31,30,31]:[31,28,31,30,31,30,31,31,30,31,30,31],l=0,f=0,_=!1;return c.reduce(function(t,e,a){return t+e>=h+1&&!_&&(_=!0,l=a,f=c[a]-(t+e-(h+1))),t+e},0),[+t,l+1,f]}},{key:"formatDate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD hh:mm:ss",a=function(t){if(void 0===t)return console.warn("注意，addZero() 补零方法没有接收到值，将返回空字符串"),"";var e=t-0;return Number.isNaN(e)?(console.warn("注意，addZero() 补零方法接收的值无法转换为数字，将返回空字符串"),""):isFinite(e)?e<10?"0"+e:""+e:(console.warn("注意，addZero() 补零方法接收的值不是js能解析的有限数值，将返回空字符串"),"")},n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD hh:mm:ss";if(!t)return console.error("formatReplace() 函数没有接收到 Date 时间日期对象。"),!1;var n=/YYYY|M{1,2}|D{1,2}|h{1,2}|m{1,2}|s{1,2}|WT|W{1,2}|timestamp/g;return e.replace(n,function(e){var n=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];switch(e){case"YYYY":return t.getFullYear();case"M":return t.getMonth()+1;case"MM":return a(t.getMonth()+1);case"D":return t.getDate();case"DD":return a(t.getDate());case"h":return t.getHours();case"hh":return a(t.getHours());case"m":return t.getMinutes();case"mm":return a(t.getMinutes());case"s":return t.getSeconds();case"ss":return a(t.getSeconds());case"W":return t.getDay();case"WW":return a(t.getDay());case"WT":return n[t.getDay()];case"timestamp":return t.getTime();default:return console.warn("没有查询到格式化字符串，请确认日期格式化字符串是否正确"),""}})};return t?n(t,e):n(new Date,e)}},{key:"formatLunarDate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._throwIfMissing(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._throwIfMissing(),a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._throwIfMissing(),r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s="",i=[].concat(_toConsumableArray(+t+"")),o=[];i.map(function(t){o.push(a.LUNAR_INFO.CHINESE_DATE[+t])}),s=o.join("");var h=this.LUNAR_INFO.CHINESE_MONTH[e-1];r&&(h=this.LUNAR_INFO.CHINESE_DATE[17]+h);var u="",d=[].concat(_toConsumableArray(+n+""));return n<=10?u=this.LUNAR_INFO.CHINESE_DATE[11]+this.LUNAR_INFO.CHINESE_DATE[+n]:n<=20?n<20?u=this.LUNAR_INFO.CHINESE_DATE[10]+this.LUNAR_INFO.CHINESE_DATE[+d[1]]:20==+n&&(u=this.LUNAR_INFO.CHINESE_DATE[2]+this.LUNAR_INFO.CHINESE_DATE[10]):n<=30&&(n<30?u=this.LUNAR_INFO.CHINESE_DATE[12]+this.LUNAR_INFO.CHINESE_DATE[+d[1]]:30==+n&&(u=this.LUNAR_INFO.CHINESE_DATE[3]+this.LUNAR_INFO.CHINESE_DATE[10])),s+this.LUNAR_INFO.CHINESE_DATE[14]+h+this.LUNAR_INFO.CHINESE_DATE[15]+u+this.LUNAR_INFO.CHINESE_DATE[16]}}]),t}();LunarFunClass.prototype.LUNAR_INFO=LUNAR_INFO;var lunarFun=new LunarFunClass;